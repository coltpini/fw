<!doctype html>
<html>
<head>
	<title>Test suite for fw.js</title>
	<script src="fw-min.js"></script>
	<script src="banner-min.js"></script>
	<script src="modal-min.js"></script>
	<script src="fwLoading-min.js"></script>

	<link rel="stylesheet" type="text/css" href="reset.css" />
	<link rel="stylesheet" type="text/css" href="loading.css" />
	<link rel="stylesheet" type="text/css" href="banner.css" />
	<link rel="stylesheet" type="text/css" href="modal.css" />
	<style>

		.demoContainer{
			position: fixed;
			top: 0;
			right: 0;
			list-style: none;
			margin: 0;
			padding: 5px;
			margin-left: 300px;
			z-index: -1;
		}
		.square {
			height: 50px;
			width: 50px;
			display: inline-block;
			background: #69f;
			margin: 1px;
			padding: 0;

			-webkit-transition: all 0.3s ease-out;
			   -moz-transition: all 0.3s ease-out;
				 -o-transition: all 0.3s ease-out;
					transition: all 0.3s ease-out;

		}
	</style>
</head>
<body>
	<script>
		var container = fw('<ul>').addClass('demoContainer');
		for (var i = 30; i >= 0; i--) {
			container.createChild('li').addClass('square');
			container.createChild('<li>').addClass('square').addClass('other');
		};
		document.body.appendChild(container);
	</script>
	<div id="fw">
		<h1>fw()</h1>
		<p>information</p>
		<select class="findSelector">
			<option></option>
			<option value=".square">.square</option>
			<option value=".other">.other</option>
			<option value=".square:first-child">.square:first-child</option>
			<option value="[.square:nth-child(10)]">[.square:nth-child(10)]</option>
			<option value="^[class]">^[class]</option>
			<option value="new">&lt;li&gt;</option>
		</select>
		<p class="feedback"></p>
		<script>
			fw('#fw .findSelector').addListener('change',function(){
				var feedback = fw('#fw .feedback');
				fw('.square').forEach(function(elem){elem.style.background = "#69f";})
				feedback.innerHTML = "";
				if(this.value === "new"){
					var newli = container.createChild('<li>').addClass('square');
					newli.opacity(0);
					setTimeout(function(){newli.opacity(1);},1);
					feedback.innerHTML = "created new li";
				}
				else if(this.value !== ""){

					var t = container.find(this.value);
					if(t.length)
						t.forEach(function(elem){elem.style.background = "#f96";});
					else
						t.style.background = "#f96";

					var num = t.length ? t.length : 1;
					feedback.innerHTML = "returned " + num + " item" + (num>1?"s":"") + " as an " + (t.length?"Array":"Element");
				}
				console.log(this.value);
			});
		</script>
	</div>

	//PUB/SUB stuff
	<div id="pubsub">
		<h1>fw.publish</h1>
		<input type="button" id="publish" value="publish" />

		<h1>fw.subscribe / fw.unsubscribe</h1>
		<input type="button" id="subscribe" value="unsubscribe"/>

		<p class="feedback"></p>

		<script>
			var ps = fw('#pubsub');
			var sub = function(data){
				ps.find('.feedback').innerHTML += data;
				container.find('.square').forEach(function(elem){
					if(data === "sub1")
						elem.style.background = "rgb(139, 235, 46)";
					else if(elem.containsClass('other'))
						elem.style.background = "rgb(215, 255, 53)";
				});
			};
			fw.subscribe('sub1',sub);
			var sub2 = fw.subscribe('sub2',sub);

			ps.find('#publish').addListener('click',function(){
				ps.find('.feedback').innerHTML = "";
				fw.publish("sub1","sub1");
				fw.publish("sub2","sub2");
			});

			ps.find('#subscribe').addListener('click',function(e){
				if(e.currentTarget.value === "unsubscribe"){
					fw.unsubscribe(sub2);
					ps.find('#subscribe').value = "subscribe";

				}
				else {
					sub2 = fw.subscribe('sub2',sub);
					ps.find('#subscribe').value = "unsubscribe";

				}
			});
		</script>
	</div>

	// event stuff
	<div>
		<h1>fw.stop / fw.cancel / fw.stopCancel</h1>
	</div>
	<div id="key">
		<h1>fw.key</h1>
		<input />
		<p class="feedback"></p>
		<script type="text/javascript">
			var k = fw('#key');
			var keyHandler = function(e){

				var fb = k.find('.feedback');
				if(e.type === "keydown")
					fb.innerHTML = "";
				var kp = fw.key(e);
				fb.innerHTML += "<div>" + e.type + ": {code: " + kp.code + ", char: " + kp.char + "}</div>";
				if(e.type === "keypress")
					fw.stopCancel(e);
			};
			k.find('input').addListener('keydown',keyHandler);
			k.find('input').addListener('keyup',keyHandler);
			k.find('input').addListener('keypress',keyHandler);
		</script>
	</div>
	<div>
		<h1>fw.pointerOffset</h1>
	</div>
	<div>
		<h1>fw.pointerPosition</h1>
	</div>
	<div>
		<h1>fw.mouseWheel</h1>
	</div>
	// async stuffs
	<div>
		<h1>fw.loadScript</h1>
	</div>
	<div>
		<h1>fw.ajax</h1>
	</div>
	<div>
		<h1>fw.jsonp</h1>
	</div>
	<div>
		<h1>fw.randomString</h1>
	</div>
	//utils
	<div>
		<h1>fw.extend</h1>
	</div>
	<div>
		<h1>fw.qs</h1>
	</div>
	<div>
		<h1>fw.proxy</h1>
	</div>
	<div>
		<h1>fw.cookie</h1>
	</div>
	//css stuffs
	<div>
		<h1>fw.cssStyle</h1>
	</div>
	<div>
		<h1>fw.styleProp</h1>
	</div>
	<!-- fw.checkCssPropSupport -->
	<div>s
		<h1>fw.extendElement</h1>
		<!-- fw.extendObject -->
	</div>

	//element functions
	<div>
		<h1>elem.isFW = true;</h1>
	</div>
	<div>
		<h1>elem.createChild</h1>
	</div>
	<div>
		<h1>elem.find</h1>
	</div>
	<div>
		<h1>elem.addClass</h1>
	</div>
	<div>
		<h1>elem.removeClass</h1>
	</div>
	<div>
		<h1>elem.toggleClass</h1>
	</div>
	<div>
		<h1>elem.containsClass</h1>
	</div>
	<div>
		<h1>elem.addListener</h1>
	</div>
	<div>
		<h1>elem.removeListener</h1>
	</div>
	<div>
		<h1>elem.opacity</h1>
	</div>


	//Extentions & Components
	<div id="loading">
		<h1>elem.addLoading</h1>
		<input type="button" value="addLoading"/>
		<br>
		Light
		<input type="radio" name="style" />
		<br>
		Dark
		<input type="radio" name="style" />
		<br>
		whole
		<input type="checkbox" id="whole" />
		<script type="text/javascript">
			var l = fw('#loading');
			var loadingHandler = function(w,s){
				w[0].addLoading(8,10);
				w.shift();
				if(w.length > 0)
					setTimeout(function(){loadingHandler(w,s);},500);
			};
			l.find('input[type="button"]').addListener('click',function(e){
				var style = fw('input[name="style"]').value || "dark",
					whole = fw('#whole').checked,
					w = whole ? fw("[.demoContainer]") : fw(".square"),
					s = whole ? {a:20,s:40} : {a:8,s:10};
					console.log(w,s)
				loadingHandler(w,s);

			});
		</script>
	</div>
	<div>
		<h1>Banner</h1>
	</div>
	<div>
		<h1>Modal</h1>
	</div>
	 <script>
	// 	// test for fw.js
	// 	// testing items into the fw function.
	// 	//creating a div.
	// 	var first = fw("<div>").addClass('cont');
	// 	first.id = "first";
	// 	var child = fw("<span>").addClass('child');
	// 	//still a dom object and has access to dom methods.
	// 	child.innerHTML = "first child";
	// 	child.style.margin = "20px";
	// 	first.appendChild(child);

	// 	fw('.container').appendChild(first);
	// 	fw('.container').insertBefore(first,document.getElementById('second'));
	// 	var inp = fw('.container').createChild("<div>").addClass('fourth').createChild('<input>');
	// 	var keyhandler = function(e){
	// 		console.log(fw.key(e));
	// 	};
	// 	inp.addListener('keypress',keyhandler);
	// 	inp.addListener('keydown',keyhandler);
	// 	inp.addListener('keyup',keyhandler);


	// 	// selecting a div
	// 	var second = fw("#second").addClass('cont');
	// 	// passing in a element.
	// 	var third = document.getElementById('third').addClass('cont');

	// 	//returning an array by using find.
	// 	var lis = third.find('li');
	// 	var one = third.find('.one');
	// 	//adding classes - should add all classes.
	// 	one.addClass('yep').addClass('yepper').addClass('hello');
	// 	for(var i=0;i<lis.length;i++){
	// 		var li = lis[i];
	// 		//toggling classes - one and two should have the "yepper" class removed, all others should see the yepper class.
	// 		li.toggleClass('yepper');
	// 		// should add a basic click handler
	// 		li.addListener('click',handler);
	// 		if(i===0){
	// 			li.addListener('mousemove',handler,false,second);
	// 		}
	// 	}
	// 	// one should have the hello class removed.
	// 	one.removeClass('hello');
	// 	one.removeListener('click',handler);
	// 	one.removeListener('mousemove',handler,false);

	// 	first.addListener('click',handler,false);
	// 	second.addListener('click',handler,true,first);

	// 	var mtype = fw('#type'),
	// 		mSubtype = fw('#subtype'),
	// 		mclicker = fw('.alerts .clicker');

	// 	mtype.addListener('change',typeHandler);
	// 	mclicker.addListener('click',mClickerHandler);

	// 	var alert = new Banner(fw('.alertBanner'));
	// 	var banner = new Banner(fw('.messages'));

	// 	function handler(e){
	// 		console.log("handler:", this, e.currentTarget, e.target);
	// 		console.log("handler:", this.getAttribute('id'), e.currentTarget.getAttribute('id'), e.target.getAttribute('id'));
	// 		if(e.currentTarget.containsClass('yepper'))
	// 			console.log('a yepper click');
	// 	}
	// 	function typeHandler(e){
	// 		if(mtype.selectedIndex === 2){
	// 			mSubtype.options[0].disabled = true;

	// 			if(mSubtype.selectedIndex === 0)
	// 				mSubtype.selectedIndex = 1;
	// 		}
	// 		else{
	// 			mSubtype.options[0].disabled = false;
	// 		}
	// 	}
	// 	function mClickerHandler(e){
	// 		var title = "The Title";
	// 		var message = "The really neat test message that will be displayed";
	// 		var callback = function(val){console.log(val);};
	// 		switch(mtype.selectedIndex){
	// 			case 0:
	// 				switch (mSubtype.selectedIndex){
	// 					case 0:
	// 						alert.alert(title,message,true,callback);
	// 						break;
	// 					case 1:
	// 						alert.alert(title,message,false,callback);
	// 						break;
	// 					case 2:
	// 						alert.confirm(title,message,callback);
	// 						break;
	// 					default:
	// 						alert.prompt(title,message,42,callback);
	// 						break;
	// 				}
	// 				break;
	// 			case 1:
	// 				switch (mSubtype.selectedIndex){
	// 					case 0:
	// 						banner.alert(title,message,5000,callback);
	// 						break;
	// 					case 1:
	// 						banner.alert(title,message,false,callback);
	// 						break;
	// 					case 2:
	// 						banner.confirm(title,message,callback);
	// 						break;
	// 					default:
	// 						banner.prompt(title,message,42,callback);
	// 						break;
	// 				}
	// 				break;
	// 			default:
	// 				switch (mSubtype.selectedIndex){
	// 					case 0:
	// 						Alert(title,message,callback);
	// 						break;
	// 					case 1:
	// 						Alert(title,message,callback);
	// 						break;
	// 					case 2:
	// 						Confirm(title,message,"ok","cancel",callback);
	// 						break;
	// 					default:
	// 						Prompt(title,message,"is that your final answer?","cancel",42,callback);
	// 						break;
	// 				}
	// 				break;
	// 		}
	// 	}

	// 	fw.ajax({
	// 		url: 'ajaxDummyPage.html',
	// 		success: function(obj){ child.innerHTML = obj.val; },
	// 		failure: function(obj){ console.log(obj);},
	// 		complete: function(obj){ console.log("complete ajaxDummyPage");}
	// 	});

	// 	fw.ajax({
	// 		url: 'jsonDummyPage.js',
	// 		success: function(obj){ console.log(JSON.parse(obj.val)); },
	// 		failure: function(obj){ console.log(obj); },
	// 		complete: function(obj){ console.log("complete jsonDummyPage"); }
	// 	});

	// 	var obj1 = {
	// 		t: "t",
	// 		e: "e",
	// 		s: {test : "test"},
	// 		t2: "t"
	// 	}
	// 	var obj2 = {
	// 		t: "T",
	// 		e: "E",
	// 		t2: "T"
	// 	}
	// 	var obj3 = fw.extend(obj1,obj2);
	// 	for(var p in obj3){
	// 		console.log(p + ":" + obj3[p]);
	// 	}
	// 	console.log(obj3);

	// 	var subscriber = function(topics,data){
	// 		console.log(topics, data);
	// 	}
	// 	var subscription = fw.subscribe('fw-eventName',subscriber);
	// 	fw.publish('fw-eventName','eventData');
	// 	fw.publish('fw-eventName',{hi:"hello",name:"jonny"});

	// 	// give our service time to run
	// 	setTimeout(function(){fw.unsubscribe(subscription);},1);

	// 	setTimeout(function(){fw.publish('fw-eventName','You shouldn\'t see this');},2);
	</script>
</body>
</html>
