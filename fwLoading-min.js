fw.extendElement("addLoading",function(e,t,n,r){this.removeLoading();this.style.position!=="relative"&&this.style.position!=="absolute"&&(this.style.position="relative");var i=this.createChild("<div>").addClass("loading");typeof n=="string"&&i.addClass(n);var s=i.createChild("div"),o=fw.styleProp("transform"),u=fw.styleProp("animation");if(!o.is||!u.is)s.addClass("fallback");else{var a=e||8,f=Math.round(360/a);for(var l=1;l<a+1;l++){var c=s.createChild("div").addClass("segment"),h=c.createChild("span"),p=f*l+"deg",d=Math.random()*3,v=30,m=8,g=2/l;c.style[o.prop]="rotate("+p+")";c.style[u.prop]="loader "+d+"s linear infinite";if(r)r(a,t,l,c,h);else{if(t==="tornado")m=d*l*l;else if(t==="traditional"){c.style[u.prop]="none";h.style.borderRadius="2px";m=2*Math.PI*8;g=10/(l+1)}else t>0&&(m=t);v=m*Math.PI/e;c.style.width=m+"px";c.style.height=v+"px";c.style.marginLeft=-(m/2)+"px";c.style.marginTop=-(v/2)+"px";c.opacity(g)}}}});fw.extendElement("removeLoading",function(){var e=this.find(".loading");if(e){e.opacity=0;setTimeout(function(){e.parentNode.removeChild(e)},100)}});